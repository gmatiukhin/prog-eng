\documentclass[a4page]{article}
\usepackage[14pt]{extsizes} % для того чтобы задать нестандартный 14-ый размер шрифта
\usepackage[T2A]{fontenc}
\usepackage[russian]{babel} % поддержка русского языка
\usepackage{amsmath}  %  математические символы
\usepackage[left=20mm, top=15mm, right=15mm, bottom=30mm, footskip=15mm]{geometry} % настройки полей документа
\usepackage{indentfirst} % по умолчанию убирается отступ у первого абзаца в секции, это отменяет это.
\usepackage{paralist}

\usepackage{minted}
\usepackage{fancyvrb}
\usepackage{framed}
\usepackage{url}
\usepackage{csquotes}
\usepackage{datetime2}

\usepackage{graphicx}
\usepackage{float}
\usepackage{subcaption}
\usepackage{svg}
\graphicspath{ {./diagrams/output} }


\usepackage{caption}
\captionsetup[listing]{name=Листинг}

% \usepackage{float}
% \floatstyle{ruled}

%\renewcommand{\baselinestretch}{1.35}


\begin{document} % начало документа

% НАЧАЛО ТИТУЛЬНОГО ЛИСТА
\begin{titlepage}

\begin{center}
\hfill \break
\textbf{
\large{РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ НАРОДОВ}\\
\normalsize{Факультет физико-математических и естественных наук}\\ 
\normalsize{Кафедра математического моделирования и искуственного интеллекта}\\
}
\vspace*{\fill}
\Large{\textbf{Описание архитектуры программной системы <<Работы.Нет! и не будет!>>}}
\vspace*{\fill}

\end{center}
 
 \begin{flushright}
 Студент(ы): \underline{Матюхин Григорий и Генералов Даниил}\\ \vspace{0.5cm}
 Группа: \underline{НПИбд-01-21}
 \end{flushright}
 
 
\begin{center} \textbf{МОСКВА} \\ 2024 г. \end{center}
\thispagestyle{empty} % выключаем отображение номера для этой страницы

\end{titlepage}
 % КОНЕЦ ТИТУЛЬНОГО ЛИСТА

\newpage

\tableofcontents

\newpage

\section{Введение}

Система <<Работы.Нет! и не будет!>> представляет собой
традиционное приложение с трехуровневой архитектурой.
В системе представлены следующие слои:

\begin{itemize}
  \item слой доступа к данным;
  \item сервисный слой;
  \item пользовательский слой (слой представления).
\end{itemize}

Каждый из слоев должен иметь доступ только к слоям рядом с ним:
сервисный слой имеет доступ к слою данных,
и пользовательский слой имеет доступ к сервисному слою
(и не к базе данных напрямую).

Там, где это возможно, следует сделать так, чтобы интерфейсы взаимодействия между слоями
были стандартными и поддерживали замену реализации, а также дополнение отслеживания.
Например, должна быть возможность перейти от одной реляционной базы данных к другой,
имеющей похожий функционал --
это можно сделать, используя только стандартный SQL или ORM-интерфейсы.

В этом документе описаны некоторые подробности реализации каждого из слоев. 

\newpage
\section{Слои приложения}

\subsection{Слой доступа к данным}

Слой базы данных реализован посредством как минимум
одного сервера реляционной базы данных (например, PostgreSQL).
Для обеспечения требуемых характеристик надежности и защиты данных,
следует иметь несколько серверов с синхронной репликацией (\textit{active-active replication}),
а также копии для чтения.

На этом слое реализуется базовая защита от несанкционированных изменений.
Существуют два пользователя в СУБД, которые соответствуют двум ролям пользователей в системе:
работодатель и соискатель.
Эти два пользователя используются для операций от имени этих типов пользователя:
таким образом, даже в случае компрометации приложения со стороны соискателя,
злоумышленник не сможет редактировать информацию о работодателях или вакансиях.

\subsection{Сервисный слой}

Слой приложения реализован через HTTP-сервер, имеющий JSON-API интерфейс.
Все взаимодействие с приложением делается через этот JSON API.

Данный API должен иметь стабильное версионирование.
Старые версии API-методов должны оставаться работающими
настолько долго, насколько это экономически целесообразно,
и не меньше одного цикла стабильного релиза.
Это позволяет сторонним пользователям использовать этот API
для создания интеграций в свои CRM-системы.

Сервер должен иметь возможность работать с ограниченными правами доступа к базе данных
(как описано выше).
Для полноценного функционирования системы требуется запустить два экземпляра сервера:
один для работодателей и один для соискателей.
Они должны быть доступны на разных URL
(возможно, на разных доменах),
и при входе в систему SSO-провайдер должен
перенаправлять пользователя на соответствующую страницу в зависимости от его роли.

Опционально сервер можно расположить за кеширующим сервером
или файрволлом веб-приложений (\textit{web-application firewall}).
Они должны соблюдать семантику HTTP-заголовков, в особенности в части кеширования данных и CORS.

\begin{figure}[H]
  \centering
  \includegraphics[width=500pt]{classes.plantuml-rendered.png}
  \caption{Диаграмма классов}
\end{figure}

\subsection{Слой представления}

Слой представления состоит из одностранничного приложения
(\textit{single-page}\newline \textit{application}) на стороне клиента.
Это приложение также должно иметь режимы работы в режиме соискателя или работодателя
(разрешается публиковать его как два разных приложения).
Это приложение использует технологии HTML, CSS, JavaScript, с возможным использованием WebAssembly.

Оно не должно использовать технологии, которые доступны на меньше чем 97\% браузеров
(по данным ресурсов вроде caniuse.com).
Следует использовать мониторинг, чтобы отслеживать распределение типов и версий браузеров,
чтобы определить целевой уровень веб-платформы, которую используют клиенты.

Веб-приложение должно иметь мобильную версию, которая имеет дизайн,
пригодный для устройств с тачскрином. Чтобы экономить ресурсы разработки,
следует сделать это приложение совместимым со стандартом
прогрессивное веб-""приложение (\textit{progressive web app}),
чтобы можно было установить это приложение на устройство пользователя
прямо из браузера, не используя магазины приложений.

Веб-приложение должно иметь телеметрию для определения технических проблем.
При возникновении неожиданного исключения приложение
должно отправить детали ошибки и контекст действий пользователя,
которые привели к этой ошибке, на сервер мониторинга.

Приложение должно соответствовать рекомендациям надежности от Google:
в частности, количество ошибок, которые наблюдает пользователь (\textit{user-percieved crash rate}) должно быть не больше 1.09\%. 

\newpage
\section{Заключение}

При реализации системы следует руководствоваться KISS-принципом (\textit{keep it small and simple}):
модули системы должны быть маленькими и самодостаточными,
чтобы было легко создавать юнит-тесты для них.
Каждый модуль, который связан с бизнес-правилами, должен иметь юнит-тесты,
которые подтверждают правильность его поведения;
рекомендуется также писать юнит-тесты для вспомогательных модулей.

При изменении бизнес-правил следует в комментариях оставлять ссылку на обсуждение,
которое содержит обоснование.
Если меняются интерфейсы, нужно сохранять старый интерфейс,
добавляя к нему отслеживание использования:
когда этот интерфейс больше не используется, его реализацию можно удалять.

\end{document}
